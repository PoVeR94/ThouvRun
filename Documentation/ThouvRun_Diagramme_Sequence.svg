<?plantuml 1.2026.1beta2?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1979px" preserveAspectRatio="none" style="width:1200px;height:1979px;background:#FFFFFF;" version="1.1" viewBox="0 0 1200 1979" width="1200px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="195.6016" style="stroke:#000000;stroke-width:1.5;" width="546.4536" x="347.4458" y="810.0469"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="J" id="part1-lifeline"><g><title>Joueur</title><rect fill="#000000" fill-opacity="0.00000" height="1801.5703" width="8" x="85.4048" y="83.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="89" x2="89" y1="83.5938" y2="1885.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Engine" id="part2-lifeline"><g><title>Moteur Jeu</title><rect fill="#000000" fill-opacity="0.00000" height="1801.5703" width="8" x="213.189" y="83.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="216.4683" x2="216.4683" y1="83.5938" y2="1885.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Scores" id="part3-lifeline"><g><title>Gestion Scores</title><rect fill="#000000" fill-opacity="0.00000" height="1801.5703" width="8" x="428.6343" y="83.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="432.4458" x2="432.4458" y1="83.5938" y2="1885.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="API" id="part4-lifeline"><g><title>API Serveur</title><rect fill="#000000" fill-opacity="0.00000" height="1801.5703" width="8" x="702.0376" y="83.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="705.3467" x2="705.3467" y1="83.5938" y2="1885.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="LocalFile" id="part5-lifeline"><g><title>Backup Local</title><rect fill="#000000" fill-opacity="0.00000" height="1801.5703" width="8" x="877.2173" y="83.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="881.0664" x2="881.0664" y1="83.5938" y2="1885.1641"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="Joueur" id="part6-lifeline"><g><title>Joueur</title><rect fill="#000000" fill-opacity="0.00000" height="1801.5703" width="8" x="987.7729" y="83.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="991.3682" x2="991.3682" y1="83.5938" y2="1885.1641"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="J" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.8096" x="64" y="80.292">Joueur</text><ellipse cx="89.4048" cy="15.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M89.4048,23.7969 L89.4048,50.7969 M76.4048,31.7969 L102.4048,31.7969 M89.4048,50.7969 L76.4048,65.7969 M89.4048,50.7969 L102.4048,65.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="J" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.8096" x="64" y="1897.1592">Joueur</text><ellipse cx="89.4048" cy="1908.9609" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M89.4048,1916.9609 L89.4048,1943.9609 M76.4048,1924.9609 L102.4048,1924.9609 M89.4048,1943.9609 L76.4048,1958.9609 M89.4048,1943.9609 L102.4048,1958.9609" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Engine" id="part2-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.4414" x="172.4683" y="52.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.4414" x="179.4683" y="72.292">Moteur Jeu</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Engine" id="part2-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.4414" x="172.4683" y="1884.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.4414" x="179.4683" y="1904.1592">Moteur Jeu</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Scores" id="part3-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.377" x="357.4458" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.8359" x="380.2163" y="55.9951">Gestion Scores</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.377" x="364.4458" y="72.292">(gestion_scores.py)</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Scores" id="part3-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.377" x="357.4458" y="1884.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104.8359" x="380.2163" y="1904.1592">Gestion Scores</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.377" x="364.4458" y="1920.4561">(gestion_scores.py)</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="API" id="part4-head"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.3818" x="658.3467" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.3818" x="665.3467" y="55.9951">API Serveur</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.8467" x="682.6143" y="72.292">(Flask)</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="API" id="part4-tail"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.3818" x="658.3467" y="1884.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.3818" x="665.3467" y="1904.1592">API Serveur</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.8467" x="682.6143" y="1920.4561">(Flask)</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="LocalFile" id="part5-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7295" x="831.8525" y="63.9951">Backup Local</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.3018" x="810.0664" y="80.292">(thouv_scores.json)</text><path d="M863.2173,15 C863.2173,5 881.2173,5 881.2173,5 C881.2173,5 899.2173,5 899.2173,15 L899.2173,41 C899.2173,51 881.2173,51 881.2173,51 C881.2173,51 863.2173,51 863.2173,41 L863.2173,15" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M863.2173,15 C863.2173,25 881.2173,25 881.2173,25 C881.2173,25 899.2173,25 899.2173,15" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="LocalFile" id="part5-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7295" x="831.8525" y="1897.1592">Backup Local</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.3018" x="810.0664" y="1913.4561">(thouv_scores.json)</text><path d="M863.2173,1926.7578 C863.2173,1916.7578 881.2173,1916.7578 881.2173,1916.7578 C881.2173,1916.7578 899.2173,1916.7578 899.2173,1926.7578 L899.2173,1952.7578 C899.2173,1962.7578 881.2173,1962.7578 881.2173,1962.7578 C881.2173,1962.7578 863.2173,1962.7578 863.2173,1952.7578 L863.2173,1926.7578" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M863.2173,1926.7578 C863.2173,1936.7578 881.2173,1936.7578 881.2173,1936.7578 C881.2173,1936.7578 899.2173,1936.7578 899.2173,1926.7578" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="Joueur" id="part6-head"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58.8096" x="962.3682" y="52.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.8096" x="969.3682" y="72.292">Joueur</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="Joueur" id="part6-tail"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58.8096" x="962.3682" y="1884.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.8096" x="969.3682" y="1904.1592">Joueur</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1193.708" x="0" y="114.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="114.1602" y2="114.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="117.1602" y2="117.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="184.498" x="504.605" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="165.9722" x="510.605" y="119.6606">PHASE 1: Fin de Partie</text><path d="M5,141.7266 L5,181.7266 L301,181.7266 L301,151.7266 L291,141.7266 L5,141.7266" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M291,141.7266 L291,151.7266 L301,151.7266 L291,141.7266" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.7358" x="11" y="158.7935">Le joueur a perdu (collision avec obstacle)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.3374" x="11" y="173.9263">Ses stats: Score, Distance, Bedos</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="205.189,204.125,215.189,208.125,205.189,212.125,209.189,208.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="89.4048" x2="211.189" y1="208.125" y2="208.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.7842" x="96.4048" y="203.0591">Partie Terminee</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="420.6343,248.3906,430.6343,252.3906,420.6343,256.3906,424.6343,252.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="217.189" x2="426.6343" y1="252.3906" y2="252.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.4453" x="224.189" y="232.1919">sauvegarder_nouveau_score(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.2524" x="224.189" y="247.3247">nom, score, distance, bedos)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1193.708" x="0" y="280.957"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="280.957" y2="280.957"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="283.957" y2="283.957"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="416.27" x="388.719" y="270.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="397.7441" x="394.719" y="286.4575">PHASE 2: Sauvegarde LOCALE (Imm&#233;diat - Synchrone)</text><path d="M361,308.5234 L361,348.5234 L950,348.5234 L950,318.5234 L940,308.5234 L361,308.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M940,308.5234 L940,318.5234 L950,318.5234 L940,308.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353.355" x="474.7837" y="325.5903">[CRITIQUE] Sauvegarde imm&#233;diate et toujours r&#233;ussie</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284.6226" x="474.7837" y="340.7231">Aucun risque de perte m&#234;me sans internet!</text><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg3"><polygon fill="#181818" points="869.2173,370.9219,879.2173,374.9219,869.2173,378.9219,873.2173,374.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="875.2173" y1="374.9219" y2="374.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.8853" x="439.6343" y="369.856">1) Charger le fichier JSON existant</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg4"><polygon fill="#181818" points="443.6343,400.0547,433.6343,404.0547,443.6343,408.0547,439.6343,404.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="437.6343" x2="880.2173" y1="404.0547" y2="404.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.4497" x="449.6343" y="398.9888">[ancien_score_1, ancien_score_2, ...]</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg5"><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="474.6343" y1="448.3203" y2="448.3203"/><line style="stroke:#181818;stroke-width:1;" x1="474.6343" x2="474.6343" y1="448.3203" y2="461.3203"/><line style="stroke:#181818;stroke-width:1;" x1="433.6343" x2="474.6343" y1="461.3203" y2="461.3203"/><polygon fill="#181818" points="443.6343,457.3203,433.6343,461.3203,443.6343,465.3203,439.6343,461.3203" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.1655" x="439.6343" y="428.1216">2) Ajouter le nouveau score</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.9009" x="452.0313" y="443.2544">a la liste</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg6"><polygon fill="#181818" points="869.2173,501.5859,879.2173,505.5859,869.2173,509.5859,873.2173,505.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="875.2173" y1="505.5859" y2="505.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.7153" x="439.6343" y="485.3872">3) &#201;crire le fichier JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.688" x="452.0313" y="500.52">complet (ancien + nouveau)</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg7"><polygon fill="#181818" points="443.6343,530.7188,433.6343,534.7188,443.6343,538.7188,439.6343,534.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="437.6343" x2="880.2173" y1="534.7188" y2="534.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.5991" x="449.6343" y="529.6528">Sauvegarde OK sur disque</text></g><path d="M437,547.7188 L437,602.7188 L684,602.7188 L684,557.7188 L674,547.7188 L437,547.7188" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M674,547.7188 L674,557.7188 L684,557.7188 L674,547.7188" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.4058" x="443" y="564.7856">Le jeu peut continuer maintenant!</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.7319" x="443" y="579.9185">Les 3 threads suivants s'ex&#233;cutent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.7964" x="443" y="595.0513">en ARRIERE-PLAN (non-bloquants)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1193.708" x="0" y="628.6836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="628.6836" y2="628.6836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="631.6836" y2="631.6836"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="326.3301" x="433.689" y="618.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="307.8042" x="439.689" y="634.1841">PHASE 3: Envoi &#224; l'API (Thread 1 - ASYNC)</text><path d="M373,656.25 L373,696.25 L764,696.25 L764,666.25 L754,656.25 L373,656.25" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M754,656.25 L754,666.25 L764,666.25 L754,656.25" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.4604" x="453.9111" y="673.3169">[OPTIONAL] Fonctionne hors ligne</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.2324" x="453.9111" y="688.4497">Timeout court (2 secondes)</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg8"><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="474.6343" y1="737.7813" y2="737.7813"/><line style="stroke:#181818;stroke-width:1;" x1="474.6343" x2="474.6343" y1="737.7813" y2="750.7813"/><line style="stroke:#181818;stroke-width:1;" x1="433.6343" x2="474.6343" y1="750.7813" y2="750.7813"/><polygon fill="#181818" points="443.6343,746.7813,433.6343,750.7813,443.6343,754.7813,439.6343,750.7813" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.6196" x="439.6343" y="717.5825">Thread 1 lance:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.6108" x="439.6343" y="732.7153">_envoyer_score_api()</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg9"><polygon fill="#FF6B6B" points="694.0376,791.0469,704.0376,795.0469,694.0376,799.0469,698.0376,795.0469" style="stroke:#FF6B6B;stroke-width:1;"/><line style="stroke:#FF6B6B;stroke-width:1;" x1="432.6343" x2="700.0376" y1="795.0469" y2="795.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.9766" x="439.6343" y="774.8481">POST /api/scores</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.8164" x="439.6343" y="789.981">(envoyer 1 score)</text></g><path d="M347.4458,810.0469 L411.8887,810.0469 L411.8887,817.1797 L401.8887,827.1797 L347.4458,827.1797 L347.4458,810.0469" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="195.6016" style="stroke:#000000;stroke-width:1.5;" width="546.4536" x="347.4458" y="810.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="362.4458" y="823.1138">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130.3618" x="426.8887" y="822.2573">[Serveur R&#233;pondeur]</text><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg10"><line style="stroke:#181818;stroke-width:1;" x1="706.0376" x2="748.0376" y1="848.3125" y2="848.3125"/><line style="stroke:#181818;stroke-width:1;" x1="748.0376" x2="748.0376" y1="848.3125" y2="861.3125"/><line style="stroke:#181818;stroke-width:1;" x1="707.0376" x2="748.0376" y1="861.3125" y2="861.3125"/><polygon fill="#181818" points="717.0376,857.3125,707.0376,861.3125,717.0376,865.3125,713.0376,861.3125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.2573" x="713.0376" y="843.2466">Stocker en SQLite</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg11"><polygon fill="#181818" points="443.6343,886.4453,433.6343,890.4453,443.6343,894.4453,439.6343,890.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="437.6343" x2="705.0376" y1="890.4453" y2="890.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="449.6343" y="885.3794">200 OK</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="347.4458" x2="893.8994" y1="899.4453" y2="899.4453"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120.0869" x="352.4458" y="909.6558">[Pas de Connexion]</text><path d="M711,918.25 L711,958.25 L883,958.25 L883,928.25 L873,918.25 L711,918.25" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M873,918.25 L873,928.25 L883,928.25 L873,918.25" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.8994" x="717" y="935.3169">Pas grave! Le score est</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.0498" x="717" y="950.4497">d&#233;j&#224; sauv&#233; localement</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg12"><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="474.6343" y1="984.6484" y2="984.6484"/><line style="stroke:#181818;stroke-width:1;" x1="474.6343" x2="474.6343" y1="984.6484" y2="997.6484"/><line style="stroke:#181818;stroke-width:1;" x1="433.6343" x2="474.6343" y1="997.6484" y2="997.6484"/><polygon fill="#181818" points="443.6343,993.6484,433.6343,997.6484,443.6343,1001.6484,439.6343,997.6484" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.6885" x="439.6343" y="979.5825">timeout = continuer</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1193.708" x="0" y="1033.2148"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="1033.2148" y2="1033.2148"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="1036.2148" y2="1036.2148"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="389.8384" x="401.9348" y="1022.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="371.3125" x="407.9348" y="1038.7153">PHASE 4: Synchroniser Backup (Thread 2 - ASYNC)</text><path d="M373,1060.7813 L373,1145.7813 L764,1145.7813 L764,1070.7813 L754,1060.7813 L373,1060.7813" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M754,1060.7813 L754,1070.7813 L764,1070.7813 L754,1060.7813" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346.2837" x="390.9995" y="1077.8481">[IMPORTANT] T&#233;l&#233;charge TOUS les scores du serveur</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286.3872" x="390.9995" y="1092.981">pour que le backup local soit toujours &#224; jour</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="390.9995" y="1108.1138">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259.9365" x="390.9995" y="1123.2466">Cela evite la perte de donn&#233;es lors d'un</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.6812" x="390.9995" y="1138.3794">red&#233;ploiement ou crash serveur!</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg13"><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="474.6343" y1="1187.7109" y2="1187.7109"/><line style="stroke:#181818;stroke-width:1;" x1="474.6343" x2="474.6343" y1="1187.7109" y2="1200.7109"/><line style="stroke:#181818;stroke-width:1;" x1="433.6343" x2="474.6343" y1="1200.7109" y2="1200.7109"/><polygon fill="#181818" points="443.6343,1196.7109,433.6343,1200.7109,443.6343,1204.7109,439.6343,1200.7109" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.6196" x="439.6343" y="1167.5122">Thread 2 lance:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259.4033" x="439.6343" y="1182.645">_synchroniser_backup_depuis_serveur()</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg14"><polygon fill="#4ECDC4" points="694.0376,1240.9766,704.0376,1244.9766,694.0376,1248.9766,698.0376,1244.9766" style="stroke:#4ECDC4;stroke-width:1;"/><line style="stroke:#4ECDC4;stroke-width:1;" x1="432.6343" x2="700.0376" y1="1244.9766" y2="1244.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.1421" x="439.6343" y="1224.7778">GET /api/scores?limit=500</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.5205" x="439.6343" y="1239.9106">(r&#233;cup&#233;rer TOUS les scores)</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg15"><line style="stroke:#181818;stroke-width:1;" x1="706.0376" x2="748.0376" y1="1274.1094" y2="1274.1094"/><line style="stroke:#181818;stroke-width:1;" x1="748.0376" x2="748.0376" y1="1274.1094" y2="1287.1094"/><line style="stroke:#181818;stroke-width:1;" x1="707.0376" x2="748.0376" y1="1287.1094" y2="1287.1094"/><polygon fill="#181818" points="717.0376,1283.1094,707.0376,1287.1094,717.0376,1291.1094,713.0376,1287.1094" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.1797" x="713.0376" y="1269.0435">R&#233;cup&#233;rer depuis SQLite</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg16"><polygon fill="#181818" points="443.6343,1312.2422,433.6343,1316.2422,443.6343,1320.2422,439.6343,1316.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="437.6343" x2="705.0376" y1="1316.2422" y2="1316.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.3398" x="449.6343" y="1311.1763">[score1, score2, ..., score191]</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg17"><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="474.6343" y1="1390.7734" y2="1390.7734"/><line style="stroke:#181818;stroke-width:1;" x1="474.6343" x2="474.6343" y1="1390.7734" y2="1403.7734"/><line style="stroke:#181818;stroke-width:1;" x1="433.6343" x2="474.6343" y1="1403.7734" y2="1403.7734"/><polygon fill="#181818" points="443.6343,1399.7734,433.6343,1403.7734,443.6343,1407.7734,439.6343,1403.7734" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.7686" x="439.6343" y="1340.3091">Fusionner les listes:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.062" x="439.6343" y="1355.4419">- Garder les locaux</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.9995" x="439.6343" y="1370.5747">- Ajouter les serveur</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.0356" x="447.8989" y="1385.7075">(si pas d&#233;j&#224; local)</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg18"><polygon fill="#181818" points="869.2173,1444.0391,879.2173,1448.0391,869.2173,1452.0391,873.2173,1448.0391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="432.6343" x2="875.2173" y1="1448.0391" y2="1448.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.5669" x="439.6343" y="1427.8403">Mettre &#224; jour le backup JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.9785" x="443.7666" y="1442.9731">avec les scores fusionn&#233;s</text></g><path d="M785,1461.0391 L785,1501.0391 L976,1501.0391 L976,1471.0391 L966,1461.0391 L785,1461.0391" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M966,1461.0391 L966,1471.0391 L976,1471.0391 L966,1461.0391" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.0093" x="791" y="1478.106">Le backup est maintenant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.6372" x="791" y="1493.2388">en sync avec le serveur!</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1193.708" x="0" y="1526.8711"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="1526.8711" y2="1526.8711"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1193.708" y1="1529.8711" y2="1529.8711"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="363.7051" x="415.0015" y="1516.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="345.1792" x="421.0015" y="1532.3716">PHASE 5: Leaderboard Web (Autre Navigateur)</text><path d="M669,1554.4375 L669,1594.4375 L1026,1594.4375 L1026,1564.4375 L1016,1554.4375 L669,1554.4375" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1016,1554.4375 L1016,1564.4375 L1026,1564.4375 L1016,1554.4375" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.6597" x="687.4504" y="1571.5044">&#9201;&#65039; Mise &#224; jour toutes les 10 secondes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311.9302" x="687.4504" y="1586.6372">[AUTO-REFRESH]puis n'importe quel navigateur</text><g class="message" data-entity-1="part6" data-entity-2="part6" id="msg19"><line style="stroke:#181818;stroke-width:1;" x1="991.7729" x2="1033.7729" y1="1635.9688" y2="1635.9688"/><line style="stroke:#181818;stroke-width:1;" x1="1033.7729" x2="1033.7729" y1="1635.9688" y2="1648.9688"/><line style="stroke:#181818;stroke-width:1;" x1="992.7729" x2="1033.7729" y1="1648.9688" y2="1648.9688"/><polygon fill="#181818" points="1002.7729,1644.9688,992.7729,1648.9688,1002.7729,1652.9688,998.7729,1648.9688" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.583" x="998.7729" y="1615.77">Ouvre thouvrun.com</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9033" x="1002.9053" y="1630.9028">dans un autre onglet</text></g><g class="message" data-entity-1="part6" data-entity-2="part4" id="msg20"><polygon fill="#181818" points="717.0376,1704.3672,707.0376,1708.3672,717.0376,1712.3672,713.0376,1708.3672" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="711.0376" x2="990.7729" y1="1708.3672" y2="1708.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.3271" x="723.0376" y="1673.0356">Le leaderboard web</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.3228" x="723.0376" y="1688.1685">appelle toutes les 10s:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.1421" x="723.0376" y="1703.3013">GET /api/scores?limit=500</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg21"><line style="stroke:#181818;stroke-width:1;" x1="706.0376" x2="748.0376" y1="1737.5" y2="1737.5"/><line style="stroke:#181818;stroke-width:1;" x1="748.0376" x2="748.0376" y1="1737.5" y2="1750.5"/><line style="stroke:#181818;stroke-width:1;" x1="707.0376" x2="748.0376" y1="1750.5" y2="1750.5"/><polygon fill="#181818" points="717.0376,1746.5,707.0376,1750.5,717.0376,1754.5,713.0376,1750.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.1797" x="713.0376" y="1732.4341">R&#233;cup&#233;rer depuis SQLite</text></g><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg22"><polygon fill="#181818" points="979.7729,1775.6328,989.7729,1779.6328,979.7729,1783.6328,983.7729,1779.6328" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="706.0376" x2="985.7729" y1="1779.6328" y2="1779.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.2539" x="713.0376" y="1774.5669">[191 scores JSON]</text></g><g class="message" data-entity-1="part6" data-entity-2="part6" id="msg23"><line style="stroke:#181818;stroke-width:1;" x1="991.7729" x2="1033.7729" y1="1854.1641" y2="1854.1641"/><line style="stroke:#181818;stroke-width:1;" x1="1033.7729" x2="1033.7729" y1="1854.1641" y2="1867.1641"/><line style="stroke:#181818;stroke-width:1;" x1="992.7729" x2="1033.7729" y1="1867.1641" y2="1867.1641"/><polygon fill="#181818" points="1002.7729,1863.1641,992.7729,1867.1641,1002.7729,1871.1641,998.7729,1867.1641" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.9683" x="998.7729" y="1803.6997">Afficher tableau avec:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.7749" x="998.7729" y="1818.8325">- Classement par points</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.9351" x="998.7729" y="1833.9653">- Tri par distance/date/bedos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.1826" x="998.7729" y="1849.0981">- Recherche par joueur</text></g><?plantuml-src bLRDRXit4BxhASRfmH9gsPRp0rI0KwmLAP4ZMuwae2XiGQ1snnAJ5RdXZ-eyGazvXLxLMs-zxvlq1VeA7PAxyig9WHIGWDtb36Vcc-yRaiL6AZYN5gq2fk6ybZ5bUCmp9WmykP36BPoZVU9MksB11UwQl4Pjk1GmZgL2VIFgY_1Xfls7m-npm_k6zLtVwAeFOrHhYa6ElPJfZy6O5ce9CspEDCAJCnP_j1aCPCnIiZDBQTVbzX-q5C77B_TuYhNQwIbSlOd6NMYreSS590XNBYx2wMbDK4qWrqXb7PGL0GmGFXGeG8OgiL2FPPfoxMfZQun1phLXSOeDiXwZ1depkXtgEe1NdDv5J4zdc4XTGv60YrIhdKFpPH6dNQOnGRMYTwo5xyuYuDC6pUmQ5qmbg6Q22aLcGwtr6o7awW1q29Xi0yvTm4QbwXFAQhiB38QTQD25Ud-roZS9PmQQCFuiugMI0XkxY8Ga3YfO0bntHlr9_ztxxhIwAoztGq03Hbf2JsbG-SPgpPrVP6ChG77zoQBh0A5AnglypnLIaK835mQLGBDN0IiauF3Ofj26LWCwIwOMb62ASClZ9NVT6myl0Uyy3AQsDOTc1SnhGeXZmSLPwm1stayEuF3mS5gDMZgUD22YYam8MVGXG7yZ08WaAVqezcCvFsr0_dkikCA7ENl_MAwob82hXuJWnp96uv5AAj0Ftu8cdYOUsLhedkABfG5vMyei41ejeMuDHHE62qi9h9X3NH1YUzv6mrCmIuKi8K9RlgO5UjZ7ktmJK_K4B02b5ur6_UwesxmQH9TG5r8qvwdyP9rrezAzBGEVjednQyaX_mFIVIVp-iH7WHQnBnh_UjbvX7bE-SIvuTMaFxoC1bFeIH6xUK8gMKfYMCeNNh0JlaBfQxEAS3m1ZLHcWZi9VTtORHgf4q_xHioG4lrCOWkSO1clD-uTht_ezLwSlJYRldIPaNw7umaSaT6HBkTTuKzR-a_ap59JZZKOvPlCfMMLamG1qIns6XiPVoGtGdVyRi0DbkjL5XuVKxThc6etmBHJKSSXSKTuaFbkvmDou0qNYaRMdkE0pmbe9Fkr9Dzye9Qu6PDl87LCmrNPvG8qWAzHCmNOf_TKSYXNElwilHqgN5DPnSmkstxoVMtlNrmDHvFeSZA5IRv9YOHUzp0PlX-JZdGeXu0WBGQ0oIiZ1e0RCYIPUGZhAmCjUMKqKTtkWHperq7IBwu9TYVaC9e8tOJGpJSK87LKI_QjWraXmPQbadkeG5g85TFBCeEzx-7RoJtVT0McMSXtbc1ckPuLE-uIy5ctywhph2JWw-uE_tvE-OgRq-V7nyH4vKIRvHj5m3v0Z7QiaczKiGonIn8-fE2rzsyLnqwOcCLBwwVMDsTdpsglL-NZ-o6fgV0clFQdMlXA3R9txkFzcDKbecv2rZM7p54-CDOtjF78hBr0OuZaHOChD2Z6hJ--A-ov3Gdc6rshKB5wvWssMv1oAaCpJ4FNmNBJRx5WAuhdRTg9KSrpIQN3BpY7UcHThfTipHVCNQuU229SnKf1_FFbht___W8Nn9LjUSRXfNqzhUFjr7FgYTvFXirHjpVgZjzCVLF5Fbzbqf6Rz962s4Qjta_2jOSW3Kzj6DerfUYlMSgAGpgh2CJ47Tbqe3EVlnGBEhwgpfvN0oV2-u9_m_cDO5c6AG6raxSZnADK_hzSBVE-9aQMFNQjdtwhkEZM7SQq5zqkKtUekqPwUdRe_gc3nkcMIcE5kgxTmaHn_wMySXtHrHIF_BNBBO_GxKT_RnHkaVy1?></g></svg>